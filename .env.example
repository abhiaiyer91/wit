# ===========================================
# WIT ENVIRONMENT CONFIGURATION
# ===========================================

# -----------------------------------------
# REQUIRED IN PRODUCTION
# -----------------------------------------

# Database (Railway provides this automatically)
DATABASE_URL=postgresql://wit:wit@localhost:5432/wit

# Auth Secret - REQUIRED in production
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-secret-key-here-change-in-production

# Node Environment
NODE_ENV=development

# -----------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------

# Server port (Railway sets PORT automatically)
PORT=3000

# Server host
HOST=0.0.0.0

# Repository Storage
# Path where git repositories are stored on disk.
# For Railway: /data/repos (persistent volume)
# For local dev: ./repos
REPOS_DIR=./repos

# -----------------------------------------
# CORS & TRUSTED ORIGINS (Production)
# -----------------------------------------

# Comma-separated list of allowed CORS origins
# Example: https://wit.example.com,https://app.wit.example.com
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Comma-separated list of trusted origins for auth
# Usually same as CORS_ORIGINS
TRUSTED_ORIGINS=http://localhost:5173,http://localhost:3000

# Cookie domain for cross-subdomain auth (production only)
# Set to your root domain with leading dot (e.g., .wit.sh)
# Required when API and frontend are on different subdomains
# COOKIE_DOMAIN=.wit.sh

# -----------------------------------------
# AI FEATURES (Optional)
# -----------------------------------------

# OpenAI API Key for AI features (commit messages, code review, agents)
OPENAI_API_KEY=sk-...

# Or use Anthropic instead
# ANTHROPIC_API_KEY=sk-ant-...

# Or use OpenRouter for access to any model (Claude, GPT, Llama, Mistral, etc.)
# Get your key at https://openrouter.ai/keys
# OPENROUTER_API_KEY=sk-or-...

# Enable AI-powered code review on PRs
AI_REVIEW_ENABLED=false

# -----------------------------------------
# ENCRYPTION (Optional)
# -----------------------------------------

# Encryption key for storing AI API keys per-repo
# Falls back to BETTER_AUTH_SECRET if not set
# ENCRYPTION_KEY=your-encryption-key

# -----------------------------------------
# EMAIL NOTIFICATIONS
# -----------------------------------------

# Email service provider (Resend)
# Sign up at https://resend.com and get your API key
# RESEND_API_KEY=re_...

# Email from address (must be verified in Resend)
# EMAIL_FROM_ADDRESS=noreply@wit.dev

# Email from name (displayed in email clients)
# EMAIL_FROM_NAME=wit

# App URL for email links (e.g., password reset, email verification)
# Should match your frontend URL
# APP_URL=http://localhost:5173

# -----------------------------------------
# SANDBOX PROVIDERS
# -----------------------------------------

# Sandbox provider: docker | computesdk
# - docker: Self-hosted container-based sandboxes (default)
# - computesdk: Cloud sandboxes via ComputeSDK (E2B, Daytona, Modal, CodeSandbox, Vercel)
SANDBOX_PROVIDER=docker

# Enable audit logging for sandbox sessions
# SANDBOX_AUDIT_LOG=true

# --- Docker Provider (default, self-hosted) ---
# DOCKER_SOCKET_PATH=/var/run/docker.sock
# DOCKER_HOST=unix:///var/run/docker.sock
# SANDBOX_IMAGE=wit-sandbox:latest
# DOCKER_NETWORK=bridge

# --- ComputeSDK Provider (Cloud sandboxes) ---
# Unified API for E2B, Daytona, Modal, CodeSandbox, Vercel, Blaxel
# @see https://computesdk.com/docs
#
# COMPUTESDK_PROVIDER=modal  # Optional: e2b | daytona | modal | codesandbox | vercel | blaxel
# COMPUTESDK_TIMEOUT_MS=300000
# COMPUTESDK_AUTO_DETECT=true  # Auto-detect from environment variables

# Provider credentials (auto-detected by ComputeSDK):
#
# Modal (GPU workloads):
# MODAL_TOKEN_ID=...
# MODAL_TOKEN_SECRET=...
#
# E2B (fast microVMs):
# E2B_API_KEY=...
#
# Daytona (full dev environments):
# DAYTONA_API_KEY=...
#
# CodeSandbox (collaboration):
# CODESANDBOX_TOKEN=...
#
# Vercel (ephemeral Node.js/Python):
# VERCEL_TOKEN=...

# -----------------------------------------
# INTEGRATIONS (Optional)
# -----------------------------------------

# GitHub OAuth for Web App (Connect GitHub for imports)
# Create an OAuth App at https://github.com/settings/developers
# Callback URL: {YOUR_API_URL}/api/auth/callback/github
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# GitHub OAuth for CLI (Device Flow)
WIT_GITHUB_CLIENT_ID=Ov23liMqOvVmaVU7515C

# CodeRabbit integration
# CODERABBIT_API_KEY=...

# -----------------------------------------
# BILLING & MONETIZATION (Autumn)
# -----------------------------------------

# Autumn handles subscriptions, usage-based billing, and entitlements
# Sign up at https://getautumn.com and get your API key
# AUTUMN_SECRET_KEY=am_sk_...

# Stripe (optional - Autumn uses Stripe under the hood)
# Only needed if you want direct Stripe access
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# -----------------------------------------
# LEGACY (Deprecated)
# -----------------------------------------

# JWT_SECRET is deprecated, use BETTER_AUTH_SECRET instead
# JWT_SECRET=
