
> wit@2.0.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/Users/shanethomas/conductor/workspaces/wit/tokyo[39m

 [32mâœ“[39m src/__tests__/merge.test.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 369[2mms[22m[39m
 [32mâœ“[39m src/ci/__tests__/parser.test.ts [2m([22m[2m58 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/__tests__/repository.test.ts [2m([22m[2m60 tests[22m[2m)[22m[33m 435[2mms[22m[39m
 [32mâœ“[39m src/__tests__/git-migration.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m src/__tests__/coding-agent-tools.test.ts [2m([22m[2m57 tests[22m[2m)[22m[33m 1561[2mms[22m[39m
       [33m[2mâœ“[22m[39m should respect timeout [33m 1009[2mms[22m[39m
 [32mâœ“[39m src/__tests__/packages.test.ts [2m([22m[2m54 tests[22m[2m)[22m[33m 323[2mms[22m[39m
 [32mâœ“[39m src/__tests__/branch-protection.test.ts [2m([22m[2m58 tests[22m[2m)[22m[33m 407[2mms[22m[39m
 [31mâ¯[39m tests/integration/organizations.test.ts [2m([22m[2m31 tests[22m[2m | [22m[33m31 skipped[39m[2m)[22m[32m 14[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates an organization
       [2m[90mâ†“[39m[22m fails to create org with duplicate name
       [2m[90mâ†“[39m[22m fails to create org with invalid name
       [2m[90mâ†“[39m[22m checks organization name availability
       [2m[90mâ†“[39m[22m gets organization by name
       [2m[90mâ†“[39m[22m gets organization by ID
       [2m[90mâ†“[39m[22m updates organization
       [2m[90mâ†“[39m[22m fails to update org without permission
       [2m[90mâ†“[39m[22m searches organizations
       [2m[90mâ†“[39m[22m deletes organization
       [2m[90mâ†“[39m[22m fails to delete org without owner permission
       [2m[90mâ†“[39m[22m adds a member to organization
       [2m[90mâ†“[39m[22m fails to add duplicate member
       [2m[90mâ†“[39m[22m lists organization members
       [2m[90mâ†“[39m[22m updates member role
       [2m[90mâ†“[39m[22m fails to demote last owner
       [2m[90mâ†“[39m[22m checks membership
       [2m[90mâ†“[39m[22m removes member from organization
       [2m[90mâ†“[39m[22m member can remove themselves
       [2m[90mâ†“[39m[22m lists organizations for user
       [2m[90mâ†“[39m[22m creates a team
       [2m[90mâ†“[39m[22m fails to create duplicate team name
       [2m[90mâ†“[39m[22m lists teams in organization
       [2m[90mâ†“[39m[22m gets team by ID
       [2m[90mâ†“[39m[22m updates a team
       [2m[90mâ†“[39m[22m deletes a team
       [2m[90mâ†“[39m[22m adds member to team
       [2m[90mâ†“[39m[22m fails to add non-org member to team
       [2m[90mâ†“[39m[22m lists team members
       [2m[90mâ†“[39m[22m removes member from team
       [2m[90mâ†“[39m[22m member can remove themselves from team
 [31mâ¯[39m tests/integration/packages.test.ts [2m([22m[2m19 tests[22m[2m | [22m[33m19 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m should respond to ping
       [2m[90mâ†“[39m[22m should return whoami for authenticated user
       [2m[90mâ†“[39m[22m should reject unauthenticated whoami
       [2m[90mâ†“[39m[22m should publish a new package after enabling via tRPC
       [2m[90mâ†“[39m[22m should reject publishing to non-existent package
       [2m[90mâ†“[39m[22m should get package metadata after publish
       [2m[90mâ†“[39m[22m should publish multiple versions
       [2m[90mâ†“[39m[22m should reject unauthenticated publish
       [2m[90mâ†“[39m[22m should download tarball
       [2m[90mâ†“[39m[22m should return 404 for nonexistent version
       [2m[90mâ†“[39m[22m should manage dist tags
       [2m[90mâ†“[39m[22m should search packages
       [2m[90mâ†“[39m[22m should get package by full name via tRPC
       [2m[90mâ†“[39m[22m should list versions via tRPC
       [2m[90mâ†“[39m[22m should check canPublish via tRPC
       [2m[90mâ†“[39m[22m should list my packages via tRPC
       [2m[90mâ†“[39m[22m should enable package registry for a repo
       [2m[90mâ†“[39m[22m should disable package registry for a repo
       [2m[90mâ†“[39m[22m should get package by repo ID
 [2m[90mâ†“[39m[22m src/db/__tests__/models.test.ts [2m([22m[2m32 tests[22m[2m | [22m[33m32 skipped[39m[2m)[22m
 [32mâœ“[39m src/__tests__/acl.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [31mâ¯[39m tests/integration/full-flow.test.ts [2m([22m[2m35 tests[22m[2m | [22m[33m35 skipped[39m[2m)[22m[32m 13[2mms[22m[39m
       [2m[90mâ†“[39m[22m returns healthy status
       [2m[90mâ†“[39m[22m returns repos list endpoint
       [2m[90mâ†“[39m[22m registers a new user
       [2m[90mâ†“[39m[22m fails to register with duplicate username
       [2m[90mâ†“[39m[22m logs in with valid credentials
       [2m[90mâ†“[39m[22m fails to login with invalid credentials
       [2m[90mâ†“[39m[22m gets current user when authenticated
       [2m[90mâ†“[39m[22m returns null for unauthenticated user
       [2m[90mâ†“[39m[22m creates a public repository
       [2m[90mâ†“[39m[22m creates a private repository
       [2m[90mâ†“[39m[22m fails to create repo without authentication
       [2m[90mâ†“[39m[22m gets repository by owner and name
       [2m[90mâ†“[39m[22m lists repositories by owner
       [2m[90mâ†“[39m[22m updates repository
       [2m[90mâ†“[39m[22m deletes repository
       [2m[90mâ†“[39m[22m creates an issue
       [2m[90mâ†“[39m[22m lists issues for a repository
       [2m[90mâ†“[39m[22m gets issue by number
       [2m[90mâ†“[39m[22m updates an issue
       [2m[90mâ†“[39m[22m closes an issue
       [2m[90mâ†“[39m[22m reopens an issue
       [2m[90mâ†“[39m[22m adds a comment to an issue
       [2m[90mâ†“[39m[22m lists comments on an issue
       [2m[90mâ†“[39m[22m creates a pull request
       [2m[90mâ†“[39m[22m lists pull requests for a repository
       [2m[90mâ†“[39m[22m gets pull request by number
       [2m[90mâ†“[39m[22m updates a pull request
       [2m[90mâ†“[39m[22m adds a review to a pull request
       [2m[90mâ†“[39m[22m lists reviews for a pull request
       [2m[90mâ†“[39m[22m adds a comment to a pull request
       [2m[90mâ†“[39m[22m closes a pull request
       [2m[90mâ†“[39m[22m reopens a pull request
       [2m[90mâ†“[39m[22m lists activity feed
       [2m[90mâ†“[39m[22m lists activity for a specific user
       [2m[90mâ†“[39m[22m searches repositories
 [32mâœ“[39m src/__tests__/agent-api.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/__tests__/packed-refs.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 228[2mms[22m[39m
 [32mâœ“[39m src/server/__tests__/rate-limit.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 119[2mms[22m[39m
 [31mâ¯[39m tests/integration/releases.test.ts [2m([22m[2m27 tests[22m[2m | [22m[33m27 skipped[39m[2m)[22m[32m 13[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a release
       [2m[90mâ†“[39m[22m creates a draft release
       [2m[90mâ†“[39m[22m creates a prerelease
       [2m[90mâ†“[39m[22m gets release by ID
       [2m[90mâ†“[39m[22m gets release by tag name
       [2m[90mâ†“[39m[22m gets latest release
       [2m[90mâ†“[39m[22m gets latest including prerelease
       [2m[90mâ†“[39m[22m lists releases
       [2m[90mâ†“[39m[22m lists releases excluding drafts by default
       [2m[90mâ†“[39m[22m lists releases including drafts
       [2m[90mâ†“[39m[22m updates release
       [2m[90mâ†“[39m[22m updates release tag name
       [2m[90mâ†“[39m[22m publishes a draft release
       [2m[90mâ†“[39m[22m fails to publish already published release
       [2m[90mâ†“[39m[22m deletes release
       [2m[90mâ†“[39m[22m creates an asset
       [2m[90mâ†“[39m[22m fails to create duplicate asset name
       [2m[90mâ†“[39m[22m gets asset by ID
       [2m[90mâ†“[39m[22m lists assets for release
       [2m[90mâ†“[39m[22m updates asset
       [2m[90mâ†“[39m[22m records download
       [2m[90mâ†“[39m[22m gets total downloads for release
       [2m[90mâ†“[39m[22m deletes asset
       [2m[90mâ†“[39m[22m fails to get non-existent release
       [2m[90mâ†“[39m[22m fails to get release by non-existent tag
       [2m[90mâ†“[39m[22m fails to create asset for non-existent release
       [2m[90mâ†“[39m[22m handles pagination correctly
 [31mâ¯[39m tests/integration/milestones.test.ts [2m([22m[2m25 tests[22m[2m | [22m[33m25 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a milestone
       [2m[90mâ†“[39m[22m creates milestone with due date
       [2m[90mâ†“[39m[22m lists milestones for repository
       [2m[90mâ†“[39m[22m lists milestones filtered by state
       [2m[90mâ†“[39m[22m gets milestone by ID
       [2m[90mâ†“[39m[22m updates milestone
       [2m[90mâ†“[39m[22m updates milestone due date
       [2m[90mâ†“[39m[22m deletes milestone
       [2m[90mâ†“[39m[22m closes a milestone
       [2m[90mâ†“[39m[22m reopens a milestone
       [2m[90mâ†“[39m[22m updates state via update endpoint
       [2m[90mâ†“[39m[22m assigns issue to milestone
       [2m[90mâ†“[39m[22m removes issue from milestone
       [2m[90mâ†“[39m[22m lists issues in milestone
       [2m[90mâ†“[39m[22m filters issues by state
       [2m[90mâ†“[39m[22m assigns pull request to milestone
       [2m[90mâ†“[39m[22m removes pull request from milestone
       [2m[90mâ†“[39m[22m lists pull requests in milestone
       [2m[90mâ†“[39m[22m fails to create milestone without write permission
       [2m[90mâ†“[39m[22m allows collaborator with write permission to create milestones
       [2m[90mâ†“[39m[22m fails to delete milestone without admin permission
       [2m[90mâ†“[39m[22m fails to get non-existent milestone
       [2m[90mâ†“[39m[22m fails to create milestone for non-existent repository
       [2m[90mâ†“[39m[22m fails to assign non-existent issue to milestone
       [2m[90mâ†“[39m[22m handles pagination correctly
 [31mâ¯[39m tests/integration/repository-advanced.test.ts [2m([22m[2m27 tests[22m[2m | [22m[33m27 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m forks a public repository
       [2m[90mâ†“[39m[22m forks with custom name
       [2m[90mâ†“[39m[22m checks if user can fork
       [2m[90mâ†“[39m[22m fails to fork private repo without access
       [2m[90mâ†“[39m[22m lists forks of a repository
       [2m[90mâ†“[39m[22m stars a repository
       [2m[90mâ†“[39m[22m unstars a repository
       [2m[90mâ†“[39m[22m checks if repository is starred
       [2m[90mâ†“[39m[22m lists stargazers
       [2m[90mâ†“[39m[22m lists user starred repos
       [2m[90mâ†“[39m[22m watches a repository
       [2m[90mâ†“[39m[22m unwatches a repository
       [2m[90mâ†“[39m[22m checks if repository is watched
       [2m[90mâ†“[39m[22m lists watchers
       [2m[90mâ†“[39m[22m adds collaborator with read permission
       [2m[90mâ†“[39m[22m adds collaborator with write permission
       [2m[90mâ†“[39m[22m adds collaborator with admin permission
       [2m[90mâ†“[39m[22m removes collaborator
       [2m[90mâ†“[39m[22m lists collaborators
       [2m[90mâ†“[39m[22m fails to add collaborator without permission
       [2m[90mâ†“[39m[22m collaborator can access private repo
       [2m[90mâ†“[39m[22m searches repositories by name
       [2m[90mâ†“[39m[22m searches repositories by description
       [2m[90mâ†“[39m[22m does not return private repos in search
       [2m[90mâ†“[39m[22m fails to star non-existent repository
       [2m[90mâ†“[39m[22m fails to fork non-existent repository
       [2m[90mâ†“[39m[22m handles double starring gracefully
 [31mâ¯[39m tests/integration/branch-protection.test.ts [2m([22m[2m26 tests[22m[2m | [22m[33m26 skipped[39m[2m)[22m[32m 14[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a protection rule
       [2m[90mâ†“[39m[22m creates rule with all options
       [2m[90mâ†“[39m[22m creates rule allowing force push
       [2m[90mâ†“[39m[22m fails to create duplicate pattern
       [2m[90mâ†“[39m[22m lists protection rules
       [2m[90mâ†“[39m[22m gets rule by ID
       [2m[90mâ†“[39m[22m updates protection rule
       [2m[90mâ†“[39m[22m updates rule pattern
       [2m[90mâ†“[39m[22m deletes protection rule
       [2m[90mâ†“[39m[22m checks if branch is protected
       [2m[90mâ†“[39m[22m returns not protected for unprotected branch
       [2m[90mâ†“[39m[22m checks if push is allowed
       [2m[90mâ†“[39m[22m disallows force push to protected branch
       [2m[90mâ†“[39m[22m disallows deletion of protected branch
       [2m[90mâ†“[39m[22m allows PR merge to protected branch
       [2m[90mâ†“[39m[22m allows push to unprotected branch
       [2m[90mâ†“[39m[22m matches wildcard pattern
       [2m[90mâ†“[39m[22m matches multiple wildcards
       [2m[90mâ†“[39m[22m does not match non-matching pattern
       [2m[90mâ†“[39m[22m requires write permission to list rules
       [2m[90mâ†“[39m[22m requires admin permission to create rules
       [2m[90mâ†“[39m[22m allows admin collaborator to manage rules
       [2m[90mâ†“[39m[22m requires read permission to check branch protection
       [2m[90mâ†“[39m[22m fails to access rule from different repository
       [2m[90mâ†“[39m[22m fails to create rule for non-existent repository
       [2m[90mâ†“[39m[22m validates reviewers count
 [32mâœ“[39m src/__tests__/plumbing.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 392[2mms[22m[39m
 [32mâœ“[39m src/ci/__tests__/mastra-workflow.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/__tests__/collaborator.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 199[2mms[22m[39m
 [32mâœ“[39m src/__tests__/semantic-search.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stack.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 481[2mms[22m[39m
 [31mâ¯[39m tests/integration/stacks.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 13[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a stack
       [2m[90mâ†“[39m[22m fails to create duplicate stack
       [2m[90mâ†“[39m[22m validates stack name format
       [2m[90mâ†“[39m[22m lists stacks in repository
       [2m[90mâ†“[39m[22m gets stack by name
       [2m[90mâ†“[39m[22m deletes stack
       [2m[90mâ†“[39m[22m adds branch to stack
       [2m[90mâ†“[39m[22m fails to add non-existent branch
       [2m[90mâ†“[39m[22m fails to add duplicate branch
       [2m[90mâ†“[39m[22m removes branch from stack
       [2m[90mâ†“[39m[22m reorders branches in stack
       [2m[90mâ†“[39m[22m fails to reorder with missing branches
       [2m[90mâ†“[39m[22m fails to reorder with extra branches
       [2m[90mâ†“[39m[22m fails to create stack without write permission
       [2m[90mâ†“[39m[22m allows collaborator with write permission to create stacks
       [2m[90mâ†“[39m[22m fails to access stack in private repo without permission
       [2m[90mâ†“[39m[22m returns stack nodes for visualization
       [2m[90mâ†“[39m[22m node contains required visualization fields
       [2m[90mâ†“[39m[22m fails to access non-existent repository
       [2m[90mâ†“[39m[22m fails to get non-existent stack
       [2m[90mâ†“[39m[22m handles empty stack list
 [31mâ¯[39m tests/integration/public-api.test.ts [2m([22m[2m36 tests[22m[2m | [22m[33m36 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m GET /api/users/:username - gets user profile
       [2m[90mâ†“[39m[22m GET /api/users/:username/repos - lists user repos
       [2m[90mâ†“[39m[22m GET /api/user - gets authenticated user
       [2m[90mâ†“[39m[22m GET /api/user - returns 401 without auth
       [2m[90mâ†“[39m[22m returns 404 for non-existent user
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo - gets repository
       [2m[90mâ†“[39m[22m includes standard GitHub-like fields
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/branches - lists branches
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/contributors - lists contributors
       [2m[90mâ†“[39m[22m returns 404 for non-existent repo
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/issues - lists issues
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/issues/:number - gets issue
       [2m[90mâ†“[39m[22m includes standard issue fields
       [2m[90mâ†“[39m[22m POST /api/repos/:owner/:repo/issues - creates issue
       [2m[90mâ†“[39m[22m PATCH /api/repos/:owner/:repo/issues/:number - updates issue
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/issues/:number/comments - lists comments
       [2m[90mâ†“[39m[22m supports state filter
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/pulls - lists PRs
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/pulls/:number - gets PR
       [2m[90mâ†“[39m[22m includes standard PR fields
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/pulls/:number/reviews - lists reviews
       [2m[90mâ†“[39m[22m GET /api/repos/:owner/:repo/pulls/:number/comments - lists comments
       [2m[90mâ†“[39m[22m supports state filter
       [2m[90mâ†“[39m[22m GET /api/search/repositories - searches repos
       [2m[90mâ†“[39m[22m GET /api/search/users - searches users
       [2m[90mâ†“[39m[22m GET /api/search/issues - searches issues
       [2m[90mâ†“[39m[22m supports pagination
       [2m[90mâ†“[39m[22m GET /api/orgs/:org - gets organization
       [2m[90mâ†“[39m[22m GET /api/orgs/:org/repos - lists org repos
       [2m[90mâ†“[39m[22m GET /api/orgs/:org/members - lists org members
       [2m[90mâ†“[39m[22m returns 404 for non-existent org
       [2m[90mâ†“[39m[22m includes rate limit headers
       [2m[90mâ†“[39m[22m returns proper error format
       [2m[90mâ†“[39m[22m returns 401 for unauthorized requests
       [2m[90mâ†“[39m[22m returns 400 for invalid request body
       [2m[90mâ†“[39m[22m includes CORS headers for API requests
[90mstderr[2m | src/__tests__/conversation-history.test.ts[2m > [22m[2mError Handling[2m > [22m[2mshould handle recall errors gracefully
[22m[39m[ConversationService] Error recalling messages: Error: Database error
    at [90m/Users/shanethomas/conductor/workspaces/wit/tokyo/[39msrc/__tests__/conversation-history.test.ts:464:41
    at [90mfile:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///Users/shanethomas/conductor/workspaces/wit/tokyo/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32mâœ“[39m src/__tests__/conversation-history.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m tests/integration/git-migration.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 1435[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle pack files [33m 399[2mms[22m[39m
[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould write and read files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould create parent directories
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould return null for missing files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould read binary files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould append to files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould append to non-existent files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould delete files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould return false when deleting non-existent file
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mFile Operations[2m > [22m[2mshould check file existence
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould list directory contents
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould identify file types correctly
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould return empty array for non-existent directory
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould not list hidden files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould list files recursively
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould create and remove directories
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould remove directories recursively
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mDirectory Operations[2m > [22m[2mshould return false when removing non-existent directory
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould commit changes
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould show commit history
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould include author info in log
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould rollback last commit
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould reset to specific commit
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould show status of uncommitted changes
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mGit Operations[2m > [22m[2mshould generate diff
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mBranching[2m > [22m[2mshould create and list branches
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mBranching[2m > [22m[2mshould switch branches
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mBranching[2m > [22m[2mshould get current branch
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mBranching[2m > [22m[2mshould delete branch
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mBranching[2m > [22m[2mshould not delete current branch
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould copy files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould copy binary files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould throw when copying non-existent file
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould move files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould move files to nested directories
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould throw when moving non-existent file
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould get file stats
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould get directory stats
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould return null for non-existent path stats
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould match files with glob patterns
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mUtilities[2m > [22m[2mshould match files with simple glob
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mPath Traversal Protection[2m > [22m[2mshould prevent path traversal with ../
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mPath Traversal Protection[2m > [22m[2mshould prevent path traversal in write
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mPath Traversal Protection[2m > [22m[2mshould prevent path traversal with absolute paths
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mPath Traversal Protection[2m > [22m[2mshould allow paths with .. that stay within workspace
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty files
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle unicode content
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle files with special characters in name
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/filesystem.test.ts[2m > [22m[2mFilesystem[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle deeply nested paths
[22m[39mInitialized wit repository with sha1 hashing

 [32mâœ“[39m src/primitives/__tests__/filesystem.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 265[2mms[22m[39m
 [31mâ¯[39m tests/integration/comments.test.ts [2m([22m[2m24 tests[22m[2m | [22m[33m24 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates issue comment
       [2m[90mâ†“[39m[22m lists issue comments
       [2m[90mâ†“[39m[22m gets issue comment by ID
       [2m[90mâ†“[39m[22m updates issue comment
       [2m[90mâ†“[39m[22m fails to update other users comment
       [2m[90mâ†“[39m[22m deletes issue comment
       [2m[90mâ†“[39m[22m fails to delete other users comment
       [2m[90mâ†“[39m[22m creates PR comment
       [2m[90mâ†“[39m[22m lists PR comments
       [2m[90mâ†“[39m[22m gets PR comment by ID
       [2m[90mâ†“[39m[22m updates PR comment
       [2m[90mâ†“[39m[22m deletes PR comment
       [2m[90mâ†“[39m[22m creates file-level PR comment
       [2m[90mâ†“[39m[22m lists file comments for PR
       [2m[90mâ†“[39m[22m preserves markdown in comments
       [2m[90mâ†“[39m[22m handles unicode in comments
       [2m[90mâ†“[39m[22m handles long comments
       [2m[90mâ†“[39m[22m requires auth to create issue comment
       [2m[90mâ†“[39m[22m requires auth to create PR comment
       [2m[90mâ†“[39m[22m allows reading comments without auth
       [2m[90mâ†“[39m[22m fails to comment on non-existent issue
       [2m[90mâ†“[39m[22m fails to comment on non-existent PR
       [2m[90mâ†“[39m[22m fails to get non-existent comment
       [2m[90mâ†“[39m[22m handles empty body validation
 [31mâ¯[39m tests/integration/webhooks.test.ts [2m([22m[2m23 tests[22m[2m | [22m[33m23 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a webhook
       [2m[90mâ†“[39m[22m creates webhook with all valid events
       [2m[90mâ†“[39m[22m fails to create webhook with invalid events
       [2m[90mâ†“[39m[22m fails to create webhook with empty events
       [2m[90mâ†“[39m[22m fails to create webhook with invalid URL
       [2m[90mâ†“[39m[22m lists webhooks for repository
       [2m[90mâ†“[39m[22m gets webhook by ID
       [2m[90mâ†“[39m[22m updates webhook URL
       [2m[90mâ†“[39m[22m updates webhook events
       [2m[90mâ†“[39m[22m updates webhook secret
       [2m[90mâ†“[39m[22m clears webhook secret
       [2m[90mâ†“[39m[22m deactivates webhook
       [2m[90mâ†“[39m[22m reactivates webhook
       [2m[90mâ†“[39m[22m deletes webhook
       [2m[90mâ†“[39m[22m fails to list webhooks without write permission
       [2m[90mâ†“[39m[22m fails to create webhook without admin permission
       [2m[90mâ†“[39m[22m allows collaborator with admin permission to manage webhooks
       [2m[90mâ†“[39m[22m fails to access webhook from different repository
       [2m[90mâ†“[39m[22m tests an active webhook
       [2m[90mâ†“[39m[22m fails to test inactive webhook
       [2m[90mâ†“[39m[22m fails to test non-existent webhook
       [2m[90mâ†“[39m[22m fails to create webhook for non-existent repo
       [2m[90mâ†“[39m[22m fails to list webhooks for non-existent repo
 [32mâœ“[39m src/__tests__/rename-detection.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/__tests__/block-editor.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [31mâ¯[39m tests/integration/ai-agent.test.ts [2m([22m[2m27 tests[22m[2m | [22m[33m27 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m checks agent availability
       [2m[90mâ†“[39m[22m lists available agent types
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m starts a new conversation
       [2m[90mâ†“[39m[22m lists conversations
       [2m[90mâ†“[39m[22m gets conversation history
       [2m[90mâ†“[39m[22m deletes conversation
       [2m[90mâ†“[39m[22m sends a message
       [2m[90mâ†“[39m[22m streams response
       [2m[90mâ†“[39m[22m generates code from description
       [2m[90mâ†“[39m[22m generates with context
       [2m[90mâ†“[39m[22m triggers AI review
       [2m[90mâ†“[39m[22m gets review status
       [2m[90mâ†“[39m[22m configures auto-review
       [2m[90mâ†“[39m[22m triggers issue triage
       [2m[90mâ†“[39m[22m suggests assignees
       [2m[90mâ†“[39m[22m suggests labels
       [2m[90mâ†“[39m[22m configures auto-triage
       [2m[90mâ†“[39m[22m lists user AI keys
       [2m[90mâ†“[39m[22m adds AI key
       [2m[90mâ†“[39m[22m sets default key
       [2m[90mâ†“[39m[22m removes AI key
       [2m[90mâ†“[39m[22m lists repo AI keys
       [2m[90mâ†“[39m[22m adds repo AI key
       [2m[90mâ†“[39m[22m gets code completion
       [2m[90mâ†“[39m[22m lists MCP servers
       [2m[90mâ†“[39m[22m lists available tools
 [31mâ¯[39m tests/integration/collaborators.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m adds collaborator with read permission
       [2m[90mâ†“[39m[22m lists collaborators
       [2m[90mâ†“[39m[22m fails to add non-existent user
       [2m[90mâ†“[39m[22m requires owner/admin permission to add collaborator
       [2m[90mâ†“[39m[22m updates collaborator permission
       [2m[90mâ†“[39m[22m verifies read permission
       [2m[90mâ†“[39m[22m verifies write permission allows issue creation
       [2m[90mâ†“[39m[22m verifies admin permission allows collaborator management
       [2m[90mâ†“[39m[22m removes collaborator
       [2m[90mâ†“[39m[22m collaborator can remove themselves
       [2m[90mâ†“[39m[22m owner cannot remove themselves
       [2m[90mâ†“[39m[22m collaborator can access private repo
       [2m[90mâ†“[39m[22m outsider cannot access private repo
       [2m[90mâ†“[39m[22m unauthenticated user cannot access private repo
       [2m[90mâ†“[39m[22m sends collaboration invitation
       [2m[90mâ†“[39m[22m lists pending invitations
       [2m[90mâ†“[39m[22m cancels invitation
       [2m[90mâ†“[39m[22m checks user permission on repo
       [2m[90mâ†“[39m[22m returns null for non-collaborator
       [2m[90mâ†“[39m[22m returns owner for repository owner
       [2m[90mâ†“[39m[22m lists collaborator contributions
[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould complete the full IDE flow: create repo -> write code -> commit -> clone
[22m[39mStep 1: Creating virtual repository...
Step 2: Writing code in virtual filesystem...
Step 3: Committing changes...
  Created commit: e8d0737
Step 4: Cloning repository...
Cloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-s7DtiT/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...
âœ“ Full flow completed successfully!

[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould handle multiple commits and file modifications
[22m[39mCloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-B3YGHE/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...

[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould work with AI tools session management
[22m[39mCloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-Fcwp9x/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...

[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould handle VirtualFS directly for low-level operations
[22m[39mCloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-fWnoTk/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...

[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould support branching workflows
[22m[39mCloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-QSsgvg/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'feature'...

[90mstdout[2m | tests/integration/virtual-fs-flow.test.ts[2m > [22m[2mVirtual Filesystem Flow[2m > [22m[2mshould handle the test case: create repo -> open IDE -> agent generates function -> commit -> clone
[22m[39m
=== TEST CASE: Complete IDE/Agent Flow ===

1. User creates repository "my-awesome-project"
   Created at: /var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-D7NCow/test-repo.git

2. User opens IDE, creating editing session
   Session ID: ide-session-1767303579294

3. Agent generates code based on user request
   Generated: src/greet.ts
   Generated: src/greet.test.ts

   Changes ready to commit: 2 files
     - src/greet.test.ts (added)
     - src/greet.ts (added)

4. User commits the changes
   Commit: 0a158b6

5. Clone repository to verify
Cloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-D7NCow/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...
   Cloned to: /var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/vfs-test-D7NCow/cloned

   âœ“ src/greet.ts exists and contains greeting functions
   âœ“ src/greet.test.ts exists and contains tests

=== TEST CASE PASSED ===


 [32mâœ“[39m tests/integration/virtual-fs-flow.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 107[2mms[22m[39m
 [31mâ¯[39m tests/integration/merge-queue.test.ts [2m([22m[2m19 tests[22m[2m | [22m[33m19 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m enables merge queue for repository
       [2m[90mâ†“[39m[22m configures merge queue with required checks
       [2m[90mâ†“[39m[22m gets merge queue configuration
       [2m[90mâ†“[39m[22m disables merge queue
       [2m[90mâ†“[39m[22m requires admin permissions to configure
       [2m[90mâ†“[39m[22m adds PR to merge queue
       [2m[90mâ†“[39m[22m shows PR position in queue
       [2m[90mâ†“[39m[22m prevents duplicate queue additions
       [2m[90mâ†“[39m[22m removes PR from queue
       [2m[90mâ†“[39m[22m maintains FIFO order
       [2m[90mâ†“[39m[22m lists queue in order
       [2m[90mâ†“[39m[22m updates positions when PR removed
       [2m[90mâ†“[39m[22m gets queue status for repository
       [2m[90mâ†“[39m[22m shows empty queue status
       [2m[90mâ†“[39m[22m allows contributor to add their PR to queue
       [2m[90mâ†“[39m[22m allows owner to remove contributor PR from queue
       [2m[90mâ†“[39m[22m handles adding closed PR to queue
       [2m[90mâ†“[39m[22m handles draft PR
       [2m[90mâ†“[39m[22m handles non-existent PR
 [32mâœ“[39m src/api/__tests__/trpc.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [31mâ¯[39m tests/integration/sandbox.test.ts [2m([22m[2m19 tests[22m[2m | [22m[33m19 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m checks sandbox availability
       [2m[90mâ†“[39m[22m lists available providers
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m creates a sandbox session
       [2m[90mâ†“[39m[22m lists active sessions
       [2m[90mâ†“[39m[22m gets session status
       [2m[90mâ†“[39m[22m terminates session
       [2m[90mâ†“[39m[22m executes simple command
       [2m[90mâ†“[39m[22m captures stderr
       [2m[90mâ†“[39m[22m returns exit code
       [2m[90mâ†“[39m[22m supports timeout
       [2m[90mâ†“[39m[22m executes in working directory
       [2m[90mâ†“[39m[22m reads file content
       [2m[90mâ†“[39m[22m writes file content
       [2m[90mâ†“[39m[22m lists directory
       [2m[90mâ†“[39m[22m enforces session limits
       [2m[90mâ†“[39m[22m preserves changes within session
       [2m[90mâ†“[39m[22m handles non-existent session
       [2m[90mâ†“[39m[22m handles invalid commands gracefully
 [31mâ¯[39m tests/integration/tokens.test.ts [2m([22m[2m22 tests[22m[2m | [22m[33m22 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a token
       [2m[90mâ†“[39m[22m creates token with multiple scopes
       [2m[90mâ†“[39m[22m creates token with expiration
       [2m[90mâ†“[39m[22m creates token without expiration
       [2m[90mâ†“[39m[22m fails to create token with empty scopes
       [2m[90mâ†“[39m[22m fails to create token with invalid scope
       [2m[90mâ†“[39m[22m fails to create token with expiration > 365 days
       [2m[90mâ†“[39m[22m lists tokens
       [2m[90mâ†“[39m[22m gets token by ID
       [2m[90mâ†“[39m[22m fails to get other users token
       [2m[90mâ†“[39m[22m deletes token
       [2m[90mâ†“[39m[22m fails to delete non-existent token
       [2m[90mâ†“[39m[22m verifies valid token
       [2m[90mâ†“[39m[22m rejects invalid token
       [2m[90mâ†“[39m[22m rejects expired token
       [2m[90mâ†“[39m[22m lists available scopes
       [2m[90mâ†“[39m[22m enforces maximum token limit per user
       [2m[90mâ†“[39m[22m token value is only returned once at creation
       [2m[90mâ†“[39m[22m token prefix is consistent
       [2m[90mâ†“[39m[22m handles very long token name
       [2m[90mâ†“[39m[22m fails with name exceeding limit
       [2m[90mâ†“[39m[22m requires authentication for all operations
 [32mâœ“[39m src/__tests__/reset.test.ts [2m([22m[2m35 tests[22m[2m)[22m[33m 417[2mms[22m[39m
 [31mâ¯[39m tests/integration/projects.test.ts [2m([22m[2m26 tests[22m[2m | [22m[33m26 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a new project
       [2m[90mâ†“[39m[22m creates project with template
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m lists projects for repository
       [2m[90mâ†“[39m[22m gets project by ID
       [2m[90mâ†“[39m[22m includes column count
       [2m[90mâ†“[39m[22m creates a column
       [2m[90mâ†“[39m[22m creates multiple columns
       [2m[90mâ†“[39m[22m lists columns for project
       [2m[90mâ†“[39m[22m updates column name
       [2m[90mâ†“[39m[22m reorders columns
       [2m[90mâ†“[39m[22m creates a card
       [2m[90mâ†“[39m[22m creates card from issue
       [2m[90mâ†“[39m[22m lists cards in column
       [2m[90mâ†“[39m[22m updates card
       [2m[90mâ†“[39m[22m moves card to different column
       [2m[90mâ†“[39m[22m reorders cards within column
       [2m[90mâ†“[39m[22m deletes card
       [2m[90mâ†“[39m[22m updates project name
       [2m[90mâ†“[39m[22m updates project description
       [2m[90mâ†“[39m[22m closes project
       [2m[90mâ†“[39m[22m reopens project
       [2m[90mâ†“[39m[22m deletes empty column
       [2m[90mâ†“[39m[22m handles column with cards
       [2m[90mâ†“[39m[22m deletes a project
       [2m[90mâ†“[39m[22m deleted project is no longer retrievable
 [32mâœ“[39m src/__tests__/revert.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 160[2mms[22m[39m
 [32mâœ“[39m src/__tests__/rebase.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 182[2mms[22m[39m
 [31mâ¯[39m tests/integration/admin.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m gets system status
       [2m[90mâ†“[39m[22m gets database stats
       [2m[90mâ†“[39m[22m denies regular user access
       [2m[90mâ†“[39m[22m lists all users
       [2m[90mâ†“[39m[22m gets user details
       [2m[90mâ†“[39m[22m suspends user
       [2m[90mâ†“[39m[22m updates user role
       [2m[90mâ†“[39m[22m searches users
       [2m[90mâ†“[39m[22m lists all repositories
       [2m[90mâ†“[39m[22m gets repository details
       [2m[90mâ†“[39m[22m archives repository
       [2m[90mâ†“[39m[22m transfers repository ownership
       [2m[90mâ†“[39m[22m gets system configuration
       [2m[90mâ†“[39m[22m updates system configuration
       [2m[90mâ†“[39m[22m gets audit logs
       [2m[90mâ†“[39m[22m filters audit logs by action
       [2m[90mâ†“[39m[22m filters audit logs by user
       [2m[90mâ†“[39m[22m lists background jobs
       [2m[90mâ†“[39m[22m gets job status
       [2m[90mâ†“[39m[22m checks maintenance mode status
       [2m[90mâ†“[39m[22m enables maintenance mode
 [31mâ¯[39m tests/integration/ssh-keys.test.ts [2m([22m[2m20 tests[22m[2m | [22m[33m20 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m adds an SSH key
       [2m[90mâ†“[39m[22m fails to add invalid SSH key
       [2m[90mâ†“[39m[22m lists SSH keys
       [2m[90mâ†“[39m[22m gets SSH key by ID
       [2m[90mâ†“[39m[22m fails to get other users SSH key
       [2m[90mâ†“[39m[22m updates SSH key title
       [2m[90mâ†“[39m[22m deletes SSH key
       [2m[90mâ†“[39m[22m validates key format on add
       [2m[90mâ†“[39m[22m requires title
       [2m[90mâ†“[39m[22m enforces title length limit
       [2m[90mâ†“[39m[22m verifies fingerprint
       [2m[90mâ†“[39m[22m rejects invalid fingerprint
       [2m[90mâ†“[39m[22m enforces maximum key limit per user
       [2m[90mâ†“[39m[22m prevents adding same key twice to same account
       [2m[90mâ†“[39m[22m prevents adding key already used by another account
       [2m[90mâ†“[39m[22m handles key with comment
       [2m[90mâ†“[39m[22m handles key without comment
       [2m[90mâ†“[39m[22m requires authentication for all operations
       [2m[90mâ†“[39m[22m fails to get non-existent key
       [2m[90mâ†“[39m[22m fails to delete non-existent key
 [32mâœ“[39m src/__tests__/remote.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [31mâ¯[39m tests/integration/users.test.ts [2m([22m[2m25 tests[22m[2m | [22m[33m25 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m gets user by username
       [2m[90mâ†“[39m[22m gets user by ID
       [2m[90mâ†“[39m[22m fails to get non-existent user by username
       [2m[90mâ†“[39m[22m fails to get non-existent user by ID
       [2m[90mâ†“[39m[22m searches users by username
       [2m[90mâ†“[39m[22m searches users by name
       [2m[90mâ†“[39m[22m returns empty array for no matches
       [2m[90mâ†“[39m[22m respects search limit
       [2m[90mâ†“[39m[22m lists user repositories
       [2m[90mâ†“[39m[22m does not list private repos for other users
       [2m[90mâ†“[39m[22m lists user starred repositories
       [2m[90mâ†“[39m[22m lists user organizations
       [2m[90mâ†“[39m[22m updates user profile
       [2m[90mâ†“[39m[22m clears optional profile fields
       [2m[90mâ†“[39m[22m validates website URL format
       [2m[90mâ†“[39m[22m requires authentication for profile update
       [2m[90mâ†“[39m[22m checks username availability
       [2m[90mâ†“[39m[22m gets current user (me)
       [2m[90mâ†“[39m[22m returns null for unauthenticated me query
       [2m[90mâ†“[39m[22m checks email availability
       [2m[90mâ†“[39m[22m updates auth profile
       [2m[90mâ†“[39m[22m checks if user can change password
       [2m[90mâ†“[39m[22m handles special characters in search query
       [2m[90mâ†“[39m[22m handles unicode in profile
       [2m[90mâ†“[39m[22m handles very long bio
 [32mâœ“[39m src/__tests__/oauth-apps.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [31mâ¯[39m tests/integration/cycles.test.ts [2m([22m[2m22 tests[22m[2m | [22m[33m22 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a new cycle
       [2m[90mâ†“[39m[22m creates cycle with just name
       [2m[90mâ†“[39m[22m fails to create cycle without authentication
       [2m[90mâ†“[39m[22m validates date range
       [2m[90mâ†“[39m[22m lists cycles for repository
       [2m[90mâ†“[39m[22m lists active cycles
       [2m[90mâ†“[39m[22m lists completed cycles
       [2m[90mâ†“[39m[22m gets cycle by ID
       [2m[90mâ†“[39m[22m adds issue to cycle
       [2m[90mâ†“[39m[22m lists issues in cycle
       [2m[90mâ†“[39m[22m prevents duplicate assignment
       [2m[90mâ†“[39m[22m removes issue from cycle
       [2m[90mâ†“[39m[22m gets cycle progress
       [2m[90mâ†“[39m[22m updates progress when issue closed
       [2m[90mâ†“[39m[22m updates cycle name
       [2m[90mâ†“[39m[22m updates cycle dates
       [2m[90mâ†“[39m[22m requires authentication for updates
       [2m[90mâ†“[39m[22m completes a cycle
       [2m[90mâ†“[39m[22m completed cycle appears in completed list
       [2m[90mâ†“[39m[22m cannot add issues to completed cycle
       [2m[90mâ†“[39m[22m deletes a cycle
       [2m[90mâ†“[39m[22m deleted cycle is no longer retrievable
 [31mâ¯[39m tests/integration/gamification.test.ts [2m([22m[2m20 tests[22m[2m | [22m[33m20 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m gets current user gamification profile
       [2m[90mâ†“[39m[22m gets gamification profile by username
       [2m[90mâ†“[39m[22m fails to get profile for non-existent user
       [2m[90mâ†“[39m[22m requires authentication for myProfile
       [2m[90mâ†“[39m[22m gets current user achievements
       [2m[90mâ†“[39m[22m gets achievements for a user by username
       [2m[90mâ†“[39m[22m gets all achievement definitions
       [2m[90mâ†“[39m[22m gets all-time leaderboard
       [2m[90mâ†“[39m[22m gets weekly leaderboard
       [2m[90mâ†“[39m[22m gets monthly leaderboard
       [2m[90mâ†“[39m[22m respects leaderboard limit
       [2m[90mâ†“[39m[22m gets XP history for current user
       [2m[90mâ†“[39m[22m gets XP history with custom days
       [2m[90mâ†“[39m[22m requires authentication for XP history
       [2m[90mâ†“[39m[22m awards XP for creating an issue
       [2m[90mâ†“[39m[22m awards XP for creating a pull request
       [2m[90mâ†“[39m[22m shows current streak in profile
       [2m[90mâ†“[39m[22m shows streak info in public profile
       [2m[90mâ†“[39m[22m shows XP for next level
       [2m[90mâ†“[39m[22m XP progress is between 0 and 100
 [32mâœ“[39m src/__tests__/cherry-pick.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 159[2mms[22m[39m
 [31mâ¯[39m tests/integration/inbox.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m returns summary counts for authenticated user
       [2m[90mâ†“[39m[22m initially shows zero counts for new user
       [2m[90mâ†“[39m[22m creates a PR and shows it in author's inbox
       [2m[90mâ†“[39m[22m requests a review and shows in reviewer's inbox
       [2m[90mâ†“[39m[22m lists reviewers for a PR
       [2m[90mâ†“[39m[22m marks review as completed when review is submitted
       [2m[90mâ†“[39m[22m shows PR in participated after reviewing
       [2m[90mâ†“[39m[22m removes a review request
       [2m[90mâ†“[39m[22m filters awaiting review with limit
       [2m[90mâ†“[39m[22m filters my PRs with limit and offset
       [2m[90mâ†“[39m[22m filters participated by state
       [2m[90mâ†“[39m[22m includes author information in inbox PRs
       [2m[90mâ†“[39m[22m includes repository information in inbox PRs
 [31mâ¯[39m tests/integration/notifications.test.ts [2m([22m[2m18 tests[22m[2m | [22m[33m18 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m lists notifications
       [2m[90mâ†“[39m[22m lists with default parameters
       [2m[90mâ†“[39m[22m lists unread notifications only
       [2m[90mâ†“[39m[22m lists with pagination
       [2m[90mâ†“[39m[22m enforces limit bounds
       [2m[90mâ†“[39m[22m gets unread notification count
       [2m[90mâ†“[39m[22m marks notification as read
       [2m[90mâ†“[39m[22m marks all notifications as read
       [2m[90mâ†“[39m[22m deletes a notification
       [2m[90mâ†“[39m[22m deletes all notifications
       [2m[90mâ†“[39m[22m requires authentication to list notifications
       [2m[90mâ†“[39m[22m requires authentication to get unread count
       [2m[90mâ†“[39m[22m requires authentication to mark as read
       [2m[90mâ†“[39m[22m requires authentication to delete
       [2m[90mâ†“[39m[22m handles marking non-existent notification as read
       [2m[90mâ†“[39m[22m handles deleting non-existent notification
       [2m[90mâ†“[39m[22m handles empty notification list operations
       [2m[90mâ†“[39m[22m creates notifications for issue activity
 [32mâœ“[39m src/__tests__/stash.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 285[2mms[22m[39m
 [31mâ¯[39m tests/integration/wrapped.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
       [2m[90mâ†“[39m[22m generates wrapped for current year
       [2m[90mâ†“[39m[22m gets wrapped data
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m includes commit stats
       [2m[90mâ†“[39m[22m includes PR stats
       [2m[90mâ†“[39m[22m includes issue stats
       [2m[90mâ†“[39m[22m includes review stats
       [2m[90mâ†“[39m[22m includes language stats
       [2m[90mâ†“[39m[22m includes top repositories
       [2m[90mâ†“[39m[22m includes busiest day
       [2m[90mâ†“[39m[22m includes longest streak
       [2m[90mâ†“[39m[22m includes achievements unlocked
       [2m[90mâ†“[39m[22m compares with previous year
       [2m[90mâ†“[39m[22m generates shareable link
       [2m[90mâ†“[39m[22m gets public wrapped by share link
       [2m[90mâ†“[39m[22m revokes share link
       [2m[90mâ†“[39m[22m exports wrapped as JSON
       [2m[90mâ†“[39m[22m exports wrapped as image URL
       [2m[90mâ†“[39m[22m lists available years
       [2m[90mâ†“[39m[22m handles year with no activity
       [2m[90mâ†“[39m[22m handles future year
 [31mâ¯[39m tests/integration/search.test.ts [2m([22m[2m22 tests[22m[2m | [22m[33m22 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m searches repositories by name
       [2m[90mâ†“[39m[22m searches repositories by description
       [2m[90mâ†“[39m[22m respects search limit
       [2m[90mâ†“[39m[22m returns empty array for no matches
       [2m[90mâ†“[39m[22m does not return private repos in search
       [2m[90mâ†“[39m[22m searches users by username
       [2m[90mâ†“[39m[22m searches users by name
       [2m[90mâ†“[39m[22m respects user search limit
       [2m[90mâ†“[39m[22m searches issues by title
       [2m[90mâ†“[39m[22m searches issues within a repository
       [2m[90mâ†“[39m[22m searches issues by state
       [2m[90mâ†“[39m[22m respects issue search limit
       [2m[90mâ†“[39m[22m searches pull requests by title
       [2m[90mâ†“[39m[22m searches pull requests within a repository
       [2m[90mâ†“[39m[22m searches pull requests by state
       [2m[90mâ†“[39m[22m performs global search across entities
       [2m[90mâ†“[39m[22m filters global search by type
       [2m[90mâ†“[39m[22m respects global search limits
       [2m[90mâ†“[39m[22m handles empty query
       [2m[90mâ†“[39m[22m handles special characters in query
       [2m[90mâ†“[39m[22m handles unicode in query
       [2m[90mâ†“[39m[22m handles very long query
 [31mâ¯[39m tests/integration/workflows.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
       [2m[90mâ†“[39m[22m lists workflows for repository
       [2m[90mâ†“[39m[22m creates a workflow
       [2m[90mâ†“[39m[22m gets workflow by ID
       [2m[90mâ†“[39m[22m updates workflow
       [2m[90mâ†“[39m[22m enables/disables workflow
       [2m[90mâ†“[39m[22m triggers workflow run
       [2m[90mâ†“[39m[22m lists workflow runs
       [2m[90mâ†“[39m[22m lists runs for repository
       [2m[90mâ†“[39m[22m gets run details
       [2m[90mâ†“[39m[22m gets run jobs
       [2m[90mâ†“[39m[22m cancels running workflow
       [2m[90mâ†“[39m[22m reruns workflow
       [2m[90mâ†“[39m[22m gets job logs
       [2m[90mâ†“[39m[22m gets job steps
       [2m[90mâ†“[39m[22m lists available triggers
       [2m[90mâ†“[39m[22m filters runs by trigger
       [2m[90mâ†“[39m[22m filters runs by status
       [2m[90mâ†“[39m[22m filters runs by branch
       [2m[90mâ†“[39m[22m deletes a workflow
       [2m[90mâ†“[39m[22m requires write access to create workflow
       [2m[90mâ†“[39m[22m allows read access to list workflows
 [32mâœ“[39m src/__tests__/tag.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 243[2mms[22m[39m
 [31mâ¯[39m tests/integration/journal.test.ts [2m([22m[2m24 tests[22m[2m | [22m[33m24 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m creates a journal entry
       [2m[90mâ†“[39m[22m creates entry with repository link
       [2m[90mâ†“[39m[22m creates entry with tags
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m validates required fields
       [2m[90mâ†“[39m[22m lists journal entries
       [2m[90mâ†“[39m[22m gets entry by ID
       [2m[90mâ†“[39m[22m lists entries by date range
       [2m[90mâ†“[39m[22m lists entries by repository
       [2m[90mâ†“[39m[22m lists entries by tag
       [2m[90mâ†“[39m[22m lists entries by mood
       [2m[90mâ†“[39m[22m updates entry title
       [2m[90mâ†“[39m[22m updates entry content
       [2m[90mâ†“[39m[22m updates entry mood
       [2m[90mâ†“[39m[22m updates entry tags
       [2m[90mâ†“[39m[22m searches entries by content
       [2m[90mâ†“[39m[22m searches entries by title
       [2m[90mâ†“[39m[22m gets journal statistics
       [2m[90mâ†“[39m[22m gets mood distribution
       [2m[90mâ†“[39m[22m gets tag usage
       [2m[90mâ†“[39m[22m gets activity by date
       [2m[90mâ†“[39m[22m deletes a journal entry
       [2m[90mâ†“[39m[22m deleted entry is not retrievable
       [2m[90mâ†“[39m[22m entries are private to user
 [31mâ¯[39m tests/integration/github-import.test.ts [2m([22m[2m17 tests[22m[2m | [22m[33m17 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m checks import availability
       [2m[90mâ†“[39m[22m requires authentication for import
       [2m[90mâ†“[39m[22m validates GitHub URL format
       [2m[90mâ†“[39m[22m validates GitHub repository URL
       [2m[90mâ†“[39m[22m starts import job
       [2m[90mâ†“[39m[22m lists import jobs
       [2m[90mâ†“[39m[22m gets import job status
       [2m[90mâ†“[39m[22m imports without issues
       [2m[90mâ†“[39m[22m imports to organization
       [2m[90mâ†“[39m[22m validates repository name availability
       [2m[90mâ†“[39m[22m tracks import progress
       [2m[90mâ†“[39m[22m cancels pending import
       [2m[90mâ†“[39m[22m lists completed imports
       [2m[90mâ†“[39m[22m filters imports by status
       [2m[90mâ†“[39m[22m handles non-existent GitHub repo
       [2m[90mâ†“[39m[22m handles private GitHub repo without token
       [2m[90mâ†“[39m[22m handles invalid GitHub URL
[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould store and retrieve values
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould return content hash from set
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould return undefined for missing keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould return default value for missing keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould overwrite existing values
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mset and get[2m > [22m[2mshould handle various value types
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mhas[2m > [22m[2mshould check key existence
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mdelete[2m > [22m[2mshould delete keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mdelete[2m > [22m[2mshould return false when deleting non-existent key
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mkeys[2m > [22m[2mshould list all keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mkeys[2m > [22m[2mshould return empty array when no keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mupdate[2m > [22m[2mshould atomically update values
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mupdate[2m > [22m[2mshould create value if not exists
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mentries[2m > [22m[2mshould get all entries
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2msnapshot and restore[2m > [22m[2mshould create snapshots
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2msnapshot and restore[2m > [22m[2mshould restore to previous snapshot
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mcomplex objects[2m > [22m[2mshould handle complex nested objects
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mclear[2m > [22m[2mshould clear all knowledge
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mclear[2m > [22m[2mshould handle clearing empty knowledge
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mkey validation[2m > [22m[2mshould reject empty keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mkey validation[2m > [22m[2mshould reject keys over 200 characters
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mkey validation[2m > [22m[2mshould handle special characters in keys
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mpersistence[2m > [22m[2mshould persist data across instances
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mautoCommit option[2m > [22m[2mshould not auto-commit when disabled
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mhistory[2m > [22m[2mshould return history entries
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/primitives/__tests__/knowledge.test.ts[2m > [22m[2mKnowledge[2m > [22m[2mhistory[2m > [22m[2mshould limit history entries
[22m[39mInitialized wit repository with sha1 hashing

 [32mâœ“[39m src/primitives/__tests__/knowledge.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 244[2mms[22m[39m
[90mstdout[2m | tests/integration/storage.test.ts[2m > [22m[2mStorage Backend[2m > [22m[2mIntegration with VirtualRepository[2m > [22m[2mshould create repo via storage and use with VirtualRepository
[22m[39mCloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/storage-test-h9HD1k/cloned'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...

[90mstdout[2m | tests/integration/storage.test.ts[2m > [22m[2mStorage Backend[2m > [22m[2mFull Flow: Create -> Edit -> Commit -> Clone[2m > [22m[2mshould complete the full workflow
[22m[39m
=== Full Storage Flow Test ===

1. Configuring storage backend...
2. Creating repository via storage...

[90mstdout[2m | tests/integration/storage.test.ts[2m > [22m[2mStorage Backend[2m > [22m[2mFull Flow: Create -> Edit -> Commit -> Clone[2m > [22m[2mshould complete the full workflow
[22m[39m3. Writing code...
4. Committing changes...
   Commit: d09b73a
5. Cloning to verify...
Cloning into '/var/folders/bq/rttm1qhd599ct646fv_n277c0000gn/T/storage-test-3XO9yJ/cloned-app'...
Initialized wit repository with sha1 hashing
Copying objects...
Setting up remote tracking branches...
Checking out 'main'...
   Files cloned successfully!

=== Test Passed ===


 [32mâœ“[39m tests/integration/storage.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 73[2mms[22m[39m
 [32mâœ“[39m src/__tests__/merge-queue.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/server/storage/__tests__/merge.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 3014[2mms[22m[39m
       [33m[2mâœ“[22m[39m should perform fast-forward merge [33m 326[2mms[22m[39m
       [33m[2mâœ“[22m[39m should perform non-fast-forward merge [33m 502[2mms[22m[39m
       [33m[2mâœ“[22m[39m should detect conflicts [33m 473[2mms[22m[39m
       [33m[2mâœ“[22m[39m should perform squash merge [33m 955[2mms[22m[39m
 [31mâ¯[39m tests/integration/dashboard.test.ts [2m([22m[2m20 tests[22m[2m | [22m[33m20 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m gets dashboard overview
       [2m[90mâ†“[39m[22m gets repository count
       [2m[90mâ†“[39m[22m gets contribution stats
       [2m[90mâ†“[39m[22m gets recent activity
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m gets repository dashboard
       [2m[90mâ†“[39m[22m gets repository statistics
       [2m[90mâ†“[39m[22m gets repository activity
       [2m[90mâ†“[39m[22m gets repository contributors
       [2m[90mâ†“[39m[22m gets personal activity feed
       [2m[90mâ†“[39m[22m gets public activity feed
       [2m[90mâ†“[39m[22m gets activity for specific repo
       [2m[90mâ†“[39m[22m gets activity for specific user
       [2m[90mâ†“[39m[22m gets contribution calendar data
       [2m[90mâ†“[39m[22m gets contribution summary
       [2m[90mâ†“[39m[22m gets notification count
       [2m[90mâ†“[39m[22m lists notifications
       [2m[90mâ†“[39m[22m lists starred repositories
       [2m[90mâ†“[39m[22m lists recently accessed repositories
       [2m[90mâ†“[39m[22m lists user owned repositories
 [31mâ¯[39m tests/integration/planning.test.ts [2m([22m[2m14 tests[22m[2m | [22m[33m14 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m starts a planning session
       [2m[90mâ†“[39m[22m lists planning sessions
       [2m[90mâ†“[39m[22m gets session details
       [2m[90mâ†“[39m[22m closes planning session
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m generates task breakdown
       [2m[90mâ†“[39m[22m refines task breakdown
       [2m[90mâ†“[39m[22m suggests milestones
       [2m[90mâ†“[39m[22m generates timeline
       [2m[90mâ†“[39m[22m generates issues from plan
       [2m[90mâ†“[39m[22m estimates task complexity
       [2m[90mâ†“[39m[22m identifies dependencies
       [2m[90mâ†“[39m[22m lists plan templates
       [2m[90mâ†“[39m[22m applies plan template
 [32mâœ“[39m src/__tests__/hooks.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 168[2mms[22m[39m
[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository List[2m > [22m[2mshould return empty list for new server
[22m[39m[2m3:40:06 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=iachajb9cx[0m [2mmethod="GET" path="/repos" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository List[2m > [22m[2mshould return empty list for new server
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(33ms)[0m [2mtrace=iachajb9cx[0m [2mmethod="GET" path="/repos" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository List[2m > [22m[2mshould list created repositories
[22m[39m[server] Initialized bare repository: testuser/testrepo
[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=r9hzy2zfp7n[0m [2mmethod="GET" path="/repos" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository List[2m > [22m[2mshould list created repositories
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(1ms)[0m [2mtrace=r9hzy2zfp7n[0m [2mmethod="GET" path="/repos" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 without service parameter
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=ioj7tfcba3[0m [2mmethod="GET" path="/owner/repo/info/refs" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 without service parameter
[22m[39m[server] info/refs: owner/repo service=undefined

[90mstderr[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 without service parameter
[22m[39m[2m3:40:07 PM[0m âš ï¸  [33m[WARN][0m [34m[wit][0m Request error [2m(1ms)[0m [2mtrace=ioj7tfcba3[0m [2mmethod="GET" path="/owner/repo/info/refs" status=400[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 for unknown service
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=hmka7bn1iv4[0m [2mmethod="GET" path="/owner/repo/info/refs" query={"service":"unknown"} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 for unknown service
[22m[39m[server] info/refs: owner/repo service=unknown

[90mstderr[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return 400 for unknown service
[22m[39m[2m3:40:07 PM[0m âš ï¸  [33m[WARN][0m [34m[wit][0m Request error [2m(0ms)[0m [2mtrace=hmka7bn1iv4[0m [2mmethod="GET" path="/owner/repo/info/refs" status=400[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-upload-pack
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=n80wwx41dhc[0m [2mmethod="GET" path="/owner/repo/info/refs" query={"service":"git-upload-pack"} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-upload-pack
[22m[39m[server] info/refs: owner/repo service=git-upload-pack
[server] Initialized bare repository: owner/repo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-upload-pack
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(2ms)[0m [2mtrace=n80wwx41dhc[0m [2mmethod="GET" path="/owner/repo/info/refs" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-receive-pack
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=jigjvbkm6qi[0m [2mmethod="GET" path="/owner/repo/info/refs" query={"service":"git-receive-pack"} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-receive-pack
[22m[39m[server] info/refs: owner/repo service=git-receive-pack
[server] Initialized bare repository: owner/repo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould return refs for git-receive-pack
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(2ms)[0m [2mtrace=jigjvbkm6qi[0m [2mmethod="GET" path="/owner/repo/info/refs" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould auto-create repository on info/refs
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=44sij6undq6[0m [2mmethod="GET" path="/newowner/newrepo/info/refs" query={"service":"git-upload-pack"} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould auto-create repository on info/refs
[22m[39m[server] info/refs: newowner/newrepo service=git-upload-pack
[server] Initialized bare repository: newowner/newrepo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mInfo/Refs Endpoint[2m > [22m[2mshould auto-create repository on info/refs
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(1ms)[0m [2mtrace=44sij6undq6[0m [2mmethod="GET" path="/newowner/newrepo/info/refs" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository Manager[2m > [22m[2mshould create bare repository
[22m[39m[server] Initialized bare repository: user/project

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository Manager[2m > [22m[2mshould get existing repository
[22m[39m[server] Initialized bare repository: user/project

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository Manager[2m > [22m[2mshould auto-create repository when autoCreate is true
[22m[39m[server] Initialized bare repository: auto/created

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository Manager[2m > [22m[2mshould list all repositories
[22m[39m[server] Initialized bare repository: user1/repo1
[server] Initialized bare repository: user1/repo2
[server] Initialized bare repository: user2/repo1

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mRepository Manager[2m > [22m[2mshould delete repository
[22m[39m[server] Initialized bare repository: user/todelete
[server] Deleted repository: user/todelete

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 404 for non-existent repo
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=xgscyuobjc[0m [2mmethod="POST" path="/nonexistent/repo/git-upload-pack" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 404 for non-existent repo
[22m[39m[server] upload-pack: nonexistent/repo

[90mstderr[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 404 for non-existent repo
[22m[39m[2m3:40:07 PM[0m âš ï¸  [33m[WARN][0m [34m[wit][0m Request error [2m(0ms)[0m [2mtrace=xgscyuobjc[0m [2mmethod="POST" path="/nonexistent/repo/git-upload-pack" status=404[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=fhygi7iz7v[0m [2mmethod="GET" path="/owner/repo/info/refs" query={"service":"git-upload-pack"} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[server] info/refs: owner/repo service=git-upload-pack
[server] Initialized bare repository: owner/repo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(2ms)[0m [2mtrace=fhygi7iz7v[0m [2mmethod="GET" path="/owner/repo/info/refs" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=jqtg8gtiiya[0m [2mmethod="POST" path="/owner/repo/git-upload-pack" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[server] upload-pack: owner/repo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[server] upload-pack wants: 0, haves: 0

[90mstderr[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mUpload-Pack Endpoint[2m > [22m[2mshould return 400 for empty wants
[22m[39m[2m3:40:07 PM[0m âš ï¸  [33m[WARN][0m [34m[wit][0m Request error [2m(0ms)[0m [2mtrace=jqtg8gtiiya[0m [2mmethod="POST" path="/owner/repo/git-upload-pack" status=400[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mReceive-Pack Endpoint[2m > [22m[2mshould create repository on push to new repo
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=j96oqdimmnb[0m [2mmethod="POST" path="/newpush/repo/git-receive-pack" query={} ip="unknown"[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mReceive-Pack Endpoint[2m > [22m[2mshould create repository on push to new repo
[22m[39m[server] receive-pack: newpush/repo
[server] Initialized bare repository: newpush/repo

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mReceive-Pack Endpoint[2m > [22m[2mshould create repository on push to new repo
[22m[39m[server] receive-pack commands: 0, pack size: 0

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mReceive-Pack Endpoint[2m > [22m[2mshould create repository on push to new repo
[22m[39m[2m3:40:07 PM[0m ğŸ“˜ [36m[INFO][0m [34m[wit][0m Request completed [2m(2ms)[0m [2mtrace=j96oqdimmnb[0m [2mmethod="POST" path="/newpush/repo/git-receive-pack" status=200[0m

[90mstdout[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mNot Found[2m > [22m[2mshould return 404 for unknown routes
[22m[39m[2m3:40:07 PM[0m ğŸ” [2m[DEBUG][0m [34m[wit][0m Request started [2mtrace=na17n7vbkz[0m [2mmethod="GET" path="/unknown/path" query={} ip="unknown"[0m

[90mstderr[2m | src/server/__tests__/git.test.ts[2m > [22m[2mGit Server[2m > [22m[2mNot Found[2m > [22m[2mshould return 404 for unknown routes
[22m[39m[2m3:40:07 PM[0m âš ï¸  [33m[WARN][0m [34m[wit][0m Request error [2m(1ms)[0m [2mtrace=na17n7vbkz[0m [2mmethod="GET" path="/unknown/path" status=404[0m

 [32mâœ“[39m src/server/__tests__/git.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 104[2mms[22m[39m
 [31mâ¯[39m tests/integration/ide.test.ts [2m([22m[2m21 tests[22m[2m | [22m[33m21 skipped[39m[2m)[22m[32m 12[2mms[22m[39m
       [2m[90mâ†“[39m[22m records project access
       [2m[90mâ†“[39m[22m lists recent projects
       [2m[90mâ†“[39m[22m requires authentication
       [2m[90mâ†“[39m[22m records file access
       [2m[90mâ†“[39m[22m lists recent files
       [2m[90mâ†“[39m[22m lists recent files across repos
       [2m[90mâ†“[39m[22m saves editor state
       [2m[90mâ†“[39m[22m restores editor state
       [2m[90mâ†“[39m[22m clears editor state
       [2m[90mâ†“[39m[22m gets IDE settings
       [2m[90mâ†“[39m[22m updates IDE settings
       [2m[90mâ†“[39m[22m gets repo-specific settings
       [2m[90mâ†“[39m[22m updates repo-specific settings
       [2m[90mâ†“[39m[22m gets keyboard shortcuts
       [2m[90mâ†“[39m[22m updates keyboard shortcut
       [2m[90mâ†“[39m[22m resets shortcuts to default
       [2m[90mâ†“[39m[22m pins a file
       [2m[90mâ†“[39m[22m lists pinned files
       [2m[90mâ†“[39m[22m unpins a file
       [2m[90mâ†“[39m[22m gets workspace info
       [2m[90mâ†“[39m[22m lists workspace folders
 [32mâœ“[39m src/__tests__/submodule.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mâœ“[39m src/__tests__/bisect.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 264[2mms[22m[39m
[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowCommit[2m > [22m[2mshould display commit information
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowCommit[2m > [22m[2mshould show commit message
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowCommit[2m > [22m[2mshould show diff when not quiet
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowCommit[2m > [22m[2mshould show stat summary when --stat is used
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowCommit[2m > [22m[2mshould show only filenames when --name-only is used
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowFileAtCommit[2m > [22m[2mshould show file content at specific commit
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshowFileAtCommit[2m > [22m[2mshould throw for non-existent file
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with tags[2m > [22m[2mshould show lightweight tag info
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with tags[2m > [22m[2mshould show annotated tag info
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with commit:file syntax[2m > [22m[2mshould parse commit:file syntax correctly
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with commit:file syntax[2m > [22m[2mshould work with HEAD:file syntax
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with revision specs[2m > [22m[2mshould work with HEAD~N syntax
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow with revision specs[2m > [22m[2mshould work with commit hash
[22m[39mInitialized wit repository with sha1 hashing

[90mstdout[2m | src/__tests__/show.test.ts[2m > [22m[2mshow command[2m > [22m[2mshow errors[2m > [22m[2mshould throw for unknown ref
[22m[39mInitialized wit repository with sha1 hashing

 [32mâœ“[39m src/__tests__/show.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 183[2mms[22m[39m
 [32mâœ“[39m src/__tests__/reflog.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32mâœ“[39m src/__tests__/snapshot.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 140[2mms[22m[39m
 [32mâœ“[39m src/__tests__/clean.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 103[2mms[22m[39m
 [31mâ¯[39m src/__tests__/dual-push.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 29[2mms[22m[39m
[31m       [31mÃ—[31m should configure multiple remotes[39m[32m 6[2mms[22m[39m
[31m       [31mÃ—[31m should check if remote exists[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should support also option[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should support allRemotes option[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should support combined options[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should have correct structure[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should indicate failure when any push fails[39m[32m 4[2mms[22m[39m
 [31mâ¯[39m tests/integration/git-http.test.ts [2m([22m[2m8 tests[22m[2m | [22m[33m8 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
       [2m[90mâ†“[39m[22m returns refs for upload-pack (clone/fetch)
       [2m[90mâ†“[39m[22m returns refs for receive-pack (push)
       [2m[90mâ†“[39m[22m returns 400 for dumb HTTP (no service param)
       [2m[90mâ†“[39m[22m returns 400 for unknown service
       [2m[90mâ†“[39m[22m auto-creates repository on receive-pack if not exists
       [2m[90mâ†“[39m[22m handles upload-pack POST request
       [2m[90mâ†“[39m[22m handles receive-pack POST request structure
       [2m[90mâ†“[39m[22m auto-creates repository on upload-pack for non-existent repo
 [32mâœ“[39m src/__tests__/wrapped.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stats.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 232[2mms[22m[39m
 [32mâœ“[39m src/__tests__/gc.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 150[2mms[22m[39m
 [32mâœ“[39m src/__tests__/wip.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 92[2mms[22m[39m
 [32mâœ“[39m src/__tests__/fixup.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 128[2mms[22m[39m
 [32mâœ“[39m src/__tests__/amend.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 102[2mms[22m[39m
 [32mâœ“[39m src/__tests__/cleanup.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 114[2mms[22m[39m
 [32mâœ“[39m src/__tests__/worktree.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32mâœ“[39m src/__tests__/blame.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 80[2mms[22m[39m
 [32mâœ“[39m src/__tests__/uncommit.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 99[2mms[22m[39m
 [31mâ¯[39m tests/integration/health.test.ts [2m([22m[2m5 tests[22m[2m | [22m[33m5 skipped[39m[2m)[22m[32m 11[2mms[22m[39m
     [2m[90mâ†“[39m[22m responds to health check
     [2m[90mâ†“[39m[22m includes database status in health check
     [2m[90mâ†“[39m[22m returns repos list
     [2m[90mâ†“[39m[22m returns 404 for unknown routes
     [2m[90mâ†“[39m[22m supports CORS

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 34 [49m[22m[31mâ¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m tests/integration/admin.test.ts[2m > [22mAdmin
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/admin.test.ts:30:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/admin.test.ts',
      line: 30,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/admin.test.ts:[2m30:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/ai-agent.test.ts[2m > [22mAI Agent
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ai-agent.test.ts:30:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ai-agent.test.ts',
      line: 30,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/ai-agent.test.ts:[2m30:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/branch-protection.test.ts[2m > [22mBranch Protection Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/branch-protection.test.ts:31:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/branch-protection.test.ts',
      line: 31,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/branch-protection.test.ts:[2m31:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/collaborators.test.ts[2m > [22mCollaborators
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/collaborators.test.ts:35:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/collaborators.test.ts',
      line: 35,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/collaborators.test.ts:[2m35:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/comments.test.ts[2m > [22mComments Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/comments.test.ts:31:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/comments.test.ts',
      line: 31,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/comments.test.ts:[2m31:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/cycles.test.ts[2m > [22mCycles
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/cycles.test.ts:30:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/cycles.test.ts',
      line: 30,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/cycles.test.ts:[2m30:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/dashboard.test.ts[2m > [22mDashboard
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/dashboard.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/dashboard.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/dashboard.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/full-flow.test.ts[2m > [22mE2E Integration
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/full-flow.test.ts:22:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/full-flow.test.ts',
      line: 22,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/full-flow.test.ts:[2m22:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/gamification.test.ts[2m > [22mGamification
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/gamification.test.ts:27:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/gamification.test.ts',
      line: 27,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/gamification.test.ts:[2m27:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/git-http.test.ts[2m > [22mGit HTTP Protocol
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/git-http.test.ts:25:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/git-http.test.ts',
      line: 25,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/git-http.test.ts:[2m25:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[10/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/github-import.test.ts[2m > [22mGitHub Import
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/github-import.test.ts:28:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/github-import.test.ts',
      line: 28,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/github-import.test.ts:[2m28:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[11/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/health.test.ts[2m > [22mHealth Check
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/health.test.ts:16:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/health.test.ts',
      line: 16,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/health.test.ts:[2m16:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[12/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/ide.test.ts[2m > [22mIDE Integration
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ide.test.ts:27:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ide.test.ts',
      line: 27,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/ide.test.ts:[2m27:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[13/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/inbox.test.ts[2m > [22mPR Inbox
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/inbox.test.ts:36:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/inbox.test.ts',
      line: 36,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/inbox.test.ts:[2m36:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[14/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/journal.test.ts[2m > [22mJournal
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/journal.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/journal.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/journal.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[15/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/merge-queue.test.ts[2m > [22mMerge Queue
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/merge-queue.test.ts:32:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/merge-queue.test.ts',
      line: 32,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/merge-queue.test.ts:[2m32:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[16/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/milestones.test.ts[2m > [22mMilestones Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/milestones.test.ts:32:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/milestones.test.ts',
      line: 32,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/milestones.test.ts:[2m32:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[17/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/notifications.test.ts[2m > [22mNotifications Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/notifications.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/notifications.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/notifications.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[18/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/organizations.test.ts[2m > [22mOrganizations Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/organizations.test.ts:30:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/organizations.test.ts',
      line: 30,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/organizations.test.ts:[2m30:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[19/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/packages.test.ts[2m > [22mPackage Registry Integration
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/packages.test.ts:53:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/packages.test.ts',
      line: 53,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/packages.test.ts:[2m53:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[20/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/planning.test.ts[2m > [22mPlanning
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/planning.test.ts:27:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/planning.test.ts',
      line: 27,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/planning.test.ts:[2m27:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[21/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/projects.test.ts[2m > [22mProjects
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/projects.test.ts:31:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/projects.test.ts',
      line: 31,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/projects.test.ts:[2m31:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[22/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/public-api.test.ts[2m > [22mPublic REST API
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/public-api.test.ts:35:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/public-api.test.ts',
      line: 35,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/public-api.test.ts:[2m35:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[23/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/releases.test.ts[2m > [22mReleases Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/releases.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/releases.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/releases.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[24/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/repository-advanced.test.ts[2m > [22mRepository Advanced Features
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/repository-advanced.test.ts:33:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/repository-advanced.test.ts',
      line: 33,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/repository-advanced.test.ts:[2m33:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[25/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/sandbox.test.ts[2m > [22mSandbox
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/sandbox.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/sandbox.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/sandbox.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[26/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/search.test.ts[2m > [22mSearch
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/search.test.ts:31:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/search.test.ts',
      line: 31,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/search.test.ts:[2m31:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[27/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/ssh-keys.test.ts[2m > [22mSSH Keys Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ssh-keys.test.ts:32:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/ssh-keys.test.ts',
      line: 32,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/ssh-keys.test.ts:[2m32:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[28/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/stacks.test.ts[2m > [22mStacks Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/stacks.test.ts:30:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/stacks.test.ts',
      line: 30,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/stacks.test.ts:[2m30:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[29/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/tokens.test.ts[2m > [22mTokens Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/tokens.test.ts:27:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/tokens.test.ts',
      line: 27,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/tokens.test.ts:[2m27:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[30/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/users.test.ts[2m > [22mUsers Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/users.test.ts:28:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/users.test.ts',
      line: 28,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/users.test.ts:[2m28:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[31/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/webhooks.test.ts[2m > [22mWebhooks Flow
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/webhooks.test.ts:31:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/webhooks.test.ts',
      line: 31,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/webhooks.test.ts:[2m31:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[32/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/workflows.test.ts[2m > [22mWorkflows
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/workflows.test.ts:29:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/workflows.test.ts',
      line: 29,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/workflows.test.ts:[2m29:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[33/41]â¯[22m[39m

[41m[1m FAIL [22m[49m tests/integration/wrapped.test.ts[2m > [22mWrapped
{
  stack: 'AggregateError: \n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js:45:11\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at tableExists (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:26:18)\n' +
    '    at ensurePackagesSchema (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:46:23)\n' +
    '    at startTestServer (/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts:160:3)\n' +
    '    at /Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/wrapped.test.ts:28:5',
  errors: [
    {
      stack: 'Error: connect ECONNREFUSED ::1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED ::1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    },
    {
      stack: 'Error: connect ECONNREFUSED 127.0.0.1:5432\n' +
        '    at createConnectionError (node:net:1678:14)\n' +
        '    at afterConnectMultiple (node:net:1708:16)',
      message: 'connect ECONNREFUSED 127.0.0.1:5432',
      errno: -61,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432,
      constructor: 'Function<Error>',
      name: 'Error',
      toString: 'Function<toString>'
    }
  ],
  code: 'ECONNREFUSED',
  constructor: 'Function<AggregateError>',
  name: 'AggregateError',
  message: '',
  toString: 'Function<toString>',
  stacks: [
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/node_modules/pg-pool/index.js',
      line: 45,
      column: 11
    },
    {
      method: 'tableExists',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 26,
      column: 18
    },
    {
      method: 'ensurePackagesSchema',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 46,
      column: 23
    },
    {
      method: 'startTestServer',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/setup.ts',
      line: 160,
      column: 3
    },
    {
      method: '',
      file: '/Users/shanethomas/conductor/workspaces/wit/tokyo/tests/integration/wrapped.test.ts',
      line: 28,
      column: 5
    }
  ]
}
[90m [2mâ¯[22m node_modules/pg-pool/index.js:[2m45:11[22m[39m
[36m [2mâ¯[22m tableExists tests/integration/setup.ts:[2m26:18[22m[39m
    [90m 24| [39m[35masync[39m [35mfunction[39m [34mtableExists[39m(tableName[33m:[39m string)[33m:[39m [33mPromise[39m[33m<[39mboolean[33m>[39m {
    [90m 25| [39m  [35mconst[39m pool [33m=[39m [34mgetPool[39m()[33m;[39m
    [90m 26| [39m  [35mconst[39m result [33m=[39m [35mawait[39m pool[33m.[39m[34mquery[39m(
    [90m   | [39m                 [31m^[39m
    [90m 27| [39m    [32m`SELECT EXISTS (
    [90m 28| [39m      SELECT FROM information_schema.tables 
[90m [2mâ¯[22m ensurePackagesSchema tests/integration/setup.ts:[2m46:23[22m[39m
[90m [2mâ¯[22m startTestServer tests/integration/setup.ts:[2m160:3[22m[39m
[90m [2mâ¯[22m tests/integration/wrapped.test.ts:[2m28:5[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[34/41]â¯[22m[39m


[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 7 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mRemoteManager with multiple remotes[2m > [22mshould configure multiple remotes
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mRemoteManager with multiple remotes[2m > [22mshould check if remote exists
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mPushOptions interface[2m > [22mshould support also option
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mPushOptions interface[2m > [22mshould support allRemotes option
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mPushOptions interface[2m > [22mshould support combined options
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mMultiPushResult interface[2m > [22mshould have correct structure
[41m[1m FAIL [22m[49m src/__tests__/dual-push.test.ts[2m > [22mDual-Push[2m > [22mMultiPushResult interface[2m > [22mshould indicate failure when any push fails
[31m[1mReferenceError[22m: repo is not defined[39m
[36m [2mâ¯[22m src/__tests__/dual-push.test.ts:[2m55:5[22m[39m
    [90m 53| [39m`[39m)[33m;[39m
    [90m 54| [39m
    [90m 55| [39m    repo [33m=[39m [35mnew[39m [33mRepository[39m(repoDir)[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 56| [39m  })[33m;[39m
    [90m 57| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[35/41]â¯[22m[39m


[2m Test Files [22m [1m[31m35 failed[39m[22m[2m | [22m[1m[32m53 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (89)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m1291 passed[39m[22m[2m | [22m[33m772 skipped[39m[90m (2070)[39m
[2m   Start at [22m 15:39:13
[2m   Duration [22m 61.20s[2m (transform 2.32s, setup 0ms, import 40.66s, tests 14.16s, environment 6ms)[22m

